# 第一章

### Internet

与Internet连接的设备都称为**主机**或**端系统**

端系统通过**通信链路**和**分组交换机**连接到一起

当一台端系统向另一台端系统发送数据时，发送端系统将数据分段，并为每段加上首部字节，由此形成的信息包称为**分组**

交换机类型：**路由器**、**链路层交换机**

端系统通过**ISP**接入Internet

Internet中最为重要的两个协议：**TCP**和**IP**

**协议**：定义了多个通信实体之间交换的报文的格式和顺序，以及报文发送/接收或其他事件所采取的动作

### 端系统

端系统也称主机，位于Internet的边缘，进一步划分为**客户端**和**服务器**

### 接入网

**边缘路由器**：端系统到任何其他远程端系统的路径上的第一台路由器

**接入网**：将端系统物理连接到其边缘路由器的网络

1. 家庭接入：
    - 数字用户线（DSL）：利用电话公司现有的本地电话基础设施
    - 电缆：利用有线电视公司现有的有线电视基础设施
    - 光纤（FTTH）

2. 企业接入：
    - 以太网
    - WiFi

3. 广域无线接入：
    - LTE
    - 5G

### 网络核心

**分组交换**：

1. 存储转发传输：指在交换机能够开始向输出链路传输该分组的第一个比特之前，必须接收到整个分组，因此会出现存储转发时延

2. 排队时延和分组丢失：
    - 对于每条相连的链路，该分组交换机具有一个**输出缓存（也称输出队列）**，如果到达路由器的分组需要传输到某条链路，而该链路正忙于传输其他分组，该到达分组必须在输出缓存中等待，因此分组还要承受输出缓存的排队时延
    - 由于缓存的大小是有限的，一个到达的分组可能发现该缓存已经被其他等待传输的分组完全充满了，在此情况下，将出现**分组丢失（丢包）**

**电路交换**：

预留了端系统间沿路径通信所需要的资源

电路交换网络中的复用：
- 频分复用（FDM）：链路为每条连接专用一个频段
- 时分复用（TDM）：链路划分出固定期间的帧，每个帧又被划分为固定数量的时隙，当创建一条连接时，网络在每个帧中为该连接指定一个时隙

### 时延

1. 处理时延：如检查分组首部和决定将该分组导向何处所需要的时间

2. 排队时延：分组在链路上等待传输所需的时间

3. 传输时延：路由器推出分组所需要的时间

4. 传播时延：从一个路由器到另一个路由器所需的物理传播时间

### 协议分层

1. 应用层：位于应用层的信息分组称为报文

2. 运输层：位于运输层的分组称为报文段

3. 网络层：位于网络层的分组称为数据报

4. 链路层：位于链路层的分组称为帧

5. 物理层

### 封装

在发送主机端，一个**应用层报文**被传输给运输层，运输层收到报文并附上附加信息（运输层首部信息），该首部将被接收端的运输层使用。应用层报文和运输层首部信息一道构成**运输层报文段**。运输层则向网络层传递该报文，网络层增加了如源和目的端系统地址等网络层首部信息，生成了**网络层数据报**。该数据报接下来被传递给链路层，链路层增加它自己的链路层首部信息并生成**链路层帧**

所以，在每一层，一个分组具有两种类型的字段：首部字段和**有效载荷字段**，有效载荷字段通常是来自上一层的分组